name: build-backend
description: Builds a Java backend project and generate the associated Docker image & Helm chart, which can be cached. It also runs a Sonar scan (except for Renovate PRs).

inputs:
  jasypt-encryptor-password:
    description: Jasypt encryptor
    required: true

runs:
  using: "composite"

  steps:
    - name: Build API
      shell: bash
      env:
        JASYPT_ENCRYPTOR_PASSWORD: ${{ inputs.jasypt-encryptor-password }}
      run: |
        echo "JASYPT_ENCRYPTOR_PASSWORD is set to: ${{ inputs.jasypt-encryptor-password }}"
        JASYPT_ENCRYPTOR_PASSWORD=${{ inputs.jasypt-encryptor-password }}